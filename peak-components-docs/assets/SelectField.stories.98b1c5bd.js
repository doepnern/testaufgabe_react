import{j as u,a as l,r as s,F as ee,c as te}from"./index.e66c2be8.js";import{b as le,c as ne,o as ae,f as re,s as oe,a as se,d as ie,e as ce,g as de,h as ue,i as fe,j as he,k as pe,F as me,l as ge,m as xe}from"./floating-ui.react.esm.154002ce.js";import{I as P,d as M,e as we,O as ve}from"./ThemeSelector.2c212457.js";import{T as x}from"./index.es.2f0c9958.js";import{W as be}from"./WazLabel.7b336f5f.js";import{P as ye,C}from"./CodeBlock.2a0fe3d4.js";const Se=({children:n,getFloatingContainerProps:t,size:r,refs:o,selectId:f})=>u("button",{type:"button",id:f,ref:o.setReference,...t({className:x("peak-select",r)}),children:[n,l(ze,{})]}),ke=({isSelected:n,isActive:t,option:r})=>{var o;return u("div",{className:x("px-4 py-2 relative  font-normal flex flex-col overflow-hidden overflow-ellipsis rounded text-gray-800 transition-colors focus-within:ring-sky-600 focus-within:border-sky-600 focus-within:ring-1",t&&"bg-sky-600 text-white"),children:[n&&l(P,{icon:M,className:x("absolute right-2",n&&!t&&"text-sky-600")}),l("div",{className:"font-medium",children:(o=r.label)!=null?o:r.value})]})};function ze(){return l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-[1em] flex-shrink-0",children:l("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})})}const Ne=({children:n,getFloatingContainerProps:t,size:r,refs:o,selectId:f,label:d,full:a})=>u("button",{ref:o.setReference,...t({className:x("waz-select",r,a&&"full")}),id:f,children:[u("div",{className:"inline-block labelWrapper",children:[l(be,{label:d,id:f}),n]}),l(P,{icon:we})]}),Re=({isSelected:n,isActive:t,option:r})=>{var o;return u("div",{className:x("px-4 py-2 relative  font-normal flex flex-col overflow-hidden overflow-ellipsis rounded text-gray-800 transition-colors focus-within:ring-sky-600 focus-within:border-sky-600 focus-within:ring-1",t&&"bg-waz_primary text-white"),children:[n&&l(P,{icon:M,className:x("absolute right-2",n&&!t&&"text-waz_text_primary")}),l("div",{className:"font-medium",children:(o=r.label)!=null?o:r.value})]})};function I({theme:n="waz",...t}){switch(n){case"peak":return l(L,{...t,SelectRenderer:Se,ItemsRenderer:ke});case"waz":return l(L,{...t,SelectRenderer:Ne,ItemsRenderer:Re});default:throw new Error("unknown theme "+n)}}function L({ItemsRenderer:n,options:t,PlaceholderRenderer:r=Fe,SelectRenderer:o,itemHeight:f=32,onChange:d,value:a,name:h,matchTarget:V=!1,placeholder:W="Select...",size:D="sm",selectId:v,label:j,full:K}){const[g,b]=s.exports.useState(!1),[y,S]=s.exports.useState(!1),[p,k]=s.exports.useState(()=>{const e=t.findIndex(i=>i.value===a);return e===-1?null:e});s.exports.useEffect(()=>{const e=p!==null?t[p].value:null;if(a!==void 0&&a!==e){console.log("updating");const i=t.findIndex(Z=>Z.value===a);k(i===-1?null:i)}},[a]);const[c,E]=s.exports.useState(null),[O,B]=s.exports.useState(400),[_,$]=s.exports.useState(400),A=s.exports.useRef(Array(t.length).fill(null)),H=s.exports.useRef(t.map(e=>{var i;return(i=e.search)!=null?i:typeof e.value=="string"?e.value:null})),U=s.exports.useId(),Y=v!=null?v:U;!g&&y&&S(!1);const{x:z,y:N,strategy:q,context:m,refs:R}=le({placement:"bottom-start",open:g,onOpenChange:b,whileElementsMounted:ne,middleware:[ae(8),re(),oe({apply({availableHeight:e,rects:i}){te.exports.flushSync(()=>{B(e),V&&$(i.reference.width)})},padding:10})]}),w=se({count:t.length,getScrollElement:()=>R.floating.current,estimateSize:()=>f,overscan:10}),{getReferenceProps:G,getFloatingProps:J,getItemProps:Q}=ie([ce(m),de(m,{role:"listbox"}),ue(m,{bubbles:!1}),fe(m,{listRef:A,activeIndex:c,selectedIndex:p,onNavigate:E,virtual:!0,loop:!0,disabledIndices:[]}),he(m,{listRef:H,activeIndex:c,onMatch:e=>{g?E(e):(k(e),d({target:{...t[e],name:h}}))}})]);s.exports.useLayoutEffect(()=>{g&&!y&&c!==null&&w.scrollToIndex(c,{})},[w,g,c,p,y]);const F=()=>{c!==null&&(k(c),d({target:{...t[c],name:h}}),b(!1))},X=pe();return u(ee,{children:[l(o,{size:D,getFloatingContainerProps:G,refs:R,selectId:Y,label:j,full:Boolean(K),children:p!==null?l(r,{option:t[p]}):W}),l(me,{id:X,children:l(ge,{children:g&&l(xe,{context:m,children:l("div",{ref:R.setFloating,tabIndex:-1,className:"bg-white overflow-y-auto p-2 outline-none shadow-xl overflow-auto ring-1 ring-black ring-opacity-5 rounded ",style:{position:q,top:N!=null?N:0,left:z!=null?z:0,maxHeight:O,width:_},children:l("div",{className:"relative outline-none",style:{height:`${w.getTotalSize()}px`},...J({onKeyDown(e){S(!1),e.key==="Enter"&&c!==null&&F(),e.key===" "&&e.preventDefault(),e.key==="Tab"&&e.shiftKey&&b(!1)},onKeyUp(e){e.key===" "&&!m.dataRef.current.typing&&F()},onPointerMove(){S(!0)}}),tabIndex:0,children:w.getVirtualItems().map(e=>l("div",{id:`item-${e.index}`,"data-index":e.index,className:"absolute top-0 left-0 w-full cursor-pointer",tabIndex:-1,ref:i=>{w.measureElement(i),A.current[e.index]=i},role:"option","aria-selected":c===e.index,"aria-setsize":t.length,"aria-posinset":e.index+1,style:{transform:`translateY(${e.start}px)`},...Q({onClick:F}),children:l(n,{isActive:c===e.index,isSelected:e.index===p,option:t[e.index]})},e.key))})})})})})]})}function Fe({option:n}){var t;return(t=n.label)!=null?t:n.value}const T=({...n})=>{const[t,r]=s.exports.useState(null),[o,f]=s.exports.useState("waz"),d=n;return d.theme=o,u("div",{className:"flex flex-col",children:[l("h1",{className:"mb-6",children:"Select Field"}),l("div",{className:"mb-4",children:l(ye,{componentName:"SelectField"})}),l(ve,{options:["waz","peak"],onChange:f,selected:o,name:"theme"}),u("div",{className:"flex flex-col gap-3 items-center",children:[u("h3",{children:[o," theme"]}),l("p",{children:"Das select field kann nur als kontrollierte Komponente verwendet werden"}),l(C,{text:`
        <SelectField
        onChange={(option) => setValue(option.target.value)}
        options={Array.from({ length: 20 }).map((e, i) => ({
          value: i + "",
        }))}
        value={value}
        placeholder="Select...."
      />
        `,children:l(I,{...d,onChange:a=>r(a.target.value),options:Array.from({length:20}).map((a,h)=>({value:h+""})),value:t,placeholder:"Select...."})}),"Mit label:",l(C,{text:`
          <SelectField
          onChange={(option) => setValue(option.target.value)}
          options={Array.from({ length: 20000 }).map((e, i) => ({
            value: i + "",
          }))}
          selectId={"wazLabel"}
          value={value}
          placeholder="Select...."
          label={"label"}
        `,children:l(I,{...d,onChange:a=>r(a.target.value),options:Array.from({length:2e4}).map((a,h)=>({value:h+""})),selectId:"wazLabel",value:t,placeholder:"Select....",label:"label"})}),"full width",l(C,{text:`
        <SelectField
        onChange={(option) => setValue(option.target.value)}
        options={Array.from({ length: 20 }).map((e, i) => ({
          value: i + "",
        }))}
        value={value}
        placeholder="Select...."
        label={"label"}
        full
      />
        `,children:l(I,{...d,onChange:a=>r(a.target.value),options:Array.from({length:20}).map((a,h)=>({value:h+""})),value:t,placeholder:"Select....",label:"label",full:!0})})]})]})},Ce={};T.args=Ce;T.argTypes={size:{options:["xs","sm","md","lg","xl"],defaultValue:"md",control:{type:"radio"}}};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{T as Base};
